= form_for @recipe do |form|
  = render "shared/error_messages", :target => @recipe

  %p
    %h3= form.label :name, "Enter the name of the recipe"
    = form.text_field :name

  %h3 Ingredients
  .ingredients
    %table
      %tr
        %th Amount
        %th Unit
        %th Name
      = form.fields_for :ingredient_amounts do |ingredient_amount_form|
        %tr.ingredient
          %td.amount
            = ingredient_amount_form.text_field :amount
          %td.unit
            = ingredient_amount_form.text_field :unit
          = ingredient_amount_form.fields_for :ingredient do |ingredient_form|
            %td.name
              = ingredient_form.text_field :name
          %td
            = ingredient_amount_form.hidden_field :_destroy
            = link_to_function "remove", "remove_fields(this)"
  %p
    %h3= form.label :directions, "Enter the directions"
    = form.text_area :directions

  %p
    = form.submit submit_text
